<!DOCTYPE html>
<html lang="en"  xmlns:th="http://www.thymeleaf.org">
<head>
  <head>
    <meta charset="UTF-8">
    <title>getPercent</title>
    <!--  Import echarts lib by CDN, you can also import from local files  -->

    <script src="https://cdn.jsdelivr.net/npm/echarts-wordcloud@2/dist/echarts-wordcloud.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src='https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js'></script>

    <!--  Import the data files  -->
    <script src='../js/wordcloud-demo.js'></script>
    <script src='../js/piechart-demo.js'></script>
    <script src = '../js/Smoothed_line.js'></script>
  </head>
</head>
<body>
<div style="width: 100%;height: 60vh;display: flex">
  <div style="width: 50%;height: 100%">
    <div id="piechartAnsDis" style="height: 100%;width: 100%"></div>
    <div id="piechartReply" style="height: 100%;width: 100%"></div>
  </div>

</div>
<input id="ansDis" type="hidden" th:value="${ansDis}">
<input id="ansBeReply" type="hidden" th:value="${ansBeReply}">
</body>

<script>
  let json;
  let piechartRaw1;
  let piechartData;
  json = $('#ansDis').val();
  piechartRaw1 = JSON.parse(json);
  let piechartAnsDis = echarts.init(document.getElementById('piechartAnsDis'));
  piechartData  = [];
  for (const key in piechartRaw1) {
    piechartData.push({
      name: key,
      value: piechartRaw1[key]
    });
  }
  let pieOptionAnsDis = {
    title: {
      text: 'Problem Count With Corresponding Answer Count',
      textStyle: {
        fontStyle: 'oblique',
        fontSize: 20,
        color: '#4cc9f0'
      },
      left: 'center'
    },
    tooltip: {
      trigger: 'item'
    },
    grid: {
      width: '100%',
      height: '100%'
    },
    legend: {
      orient: 'vertical',
      textStyle: {
        fontSize: 20,
        color: 'black'
      },
      right: 'center',
      bottom: 'bottom',
    },
    series: [
      {
        name: 'Problem Count',
        type: 'pie',
        radius: '80%',
        data: piechartData,
        color: ['#9400D3', '#FF00FF', '#4169E1', '#3CB371',
          '#FFA500', '#FF7F50', '#DC143C', '#000080'],
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0.1, 0.2, 0, 0.5)',
          }
        },
        itemStyle: {
          normal: {
            label: {
              textStyle: {
                fontSize: 12,
                color: 'black'
              }
            }
          }
        }
      }
    ]
  };
  piechartAnsDis.setOption(pieOptionAnsDis);

  json = $('#ansBeReply').val();
  piechartRaw1 = JSON.parse(json);
  let piechartReply = echarts.init(document.getElementById('piechartReply'));
  piechartData = [];
  for (const key in piechartRaw1) {
    piechartData.push({
      name: key,
      value: piechartRaw1[key]
    });
  }
  let pieOptionReply = {
    title: {
      text: 'Problem Count With Corresponding Answer Count',
      textStyle: {
        fontStyle: 'oblique',
        fontSize: 20,
        color: '#4cc9f0'
      },
      left: 'center'
    },
    tooltip: {
      trigger: 'item'
    },
    grid: {
      width: '100%',
      height: '100%'
    },
    legend: {
      orient: 'vertical',
      textStyle: {
        fontSize: 20,
        color: 'black'
      },
      right: 'center',
      bottom: 'bottom',
    },
    series: [
      {
        name: 'Problem Count',
        type: 'pie',
        radius: '80%',
        data: piechartData,
        color: ['#9400D3', '#FF00FF', '#4169E1', '#3CB371',
          '#FFA500', '#FF7F50', '#DC143C', '#000080'],
        emphasis: {
          itemStyle: {
            shadowBlur: 10,
            shadowOffsetX: 0,
            shadowColor: 'rgba(0.1, 0.2, 0, 0.5)',
          }
        },
        itemStyle: {
          normal: {
            label: {
              textStyle: {
                fontSize: 12,
                color: 'black'
              }
            }
          }
        }
      }
    ]
  };
  piechartReply.setOption(pieOptionReply);

</script>

</html>